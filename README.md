
## ğŸ  Overview

This monorepository hosts the code for my home Kubernetes cluster infrastructure managed with [Flux](https://github.com/fluxcd/flux2).

My cluster is deployed using [Ansible](https://github.com/Belorq/Ansible-kubernetes) on Ubuntu Server as the base operating system. After the Kubernetes cluster is provisioned, Flux and GitHub Actions automatically manage and update dependencies.


<a id="org20e11a6"></a>

## ğŸ“ Repository structure

    â”œâ”€â”€ ğŸ“ clusters
    â”‚Â Â  â”œâ”€â”€ ğŸ“ apps                      # Flux configurations for the Kubernetes application layer (depends on infra)
    â”‚Â Â  â”œâ”€â”€ apps-group.yaml
    â”‚Â Â  â”œâ”€â”€ ğŸ“ flux-system               # Flux controllers and system components
    â”‚Â Â  â”œâ”€â”€ ğŸ“ infra                     # Flux configurations for the infrastructure layer (deployed first)
    â”‚Â Â  â””â”€â”€ infra-group.yaml
    â”œâ”€â”€ ğŸ“ infra                         # Infrastructure tools
    â””â”€â”€ ğŸ“ k8s                           # Applications


<a id="org4f29ac9"></a>

## âœ¨ Tools

All secrets are encrypted using [SOPS](https://github.com/getsops/sops) with [Age](https://github.com/FiloSottile/age). \
[cert-manager](https://github.com/cert-manager/cert-manager) automates SSL/TLS certificate managment. \
Monitoring is implemented using kube-prometheus-stack. \
[Local Path Provisioner](https://github.com/rancher/local-path-provisioner) is used for local storage until a NAS is built.\

For CI, I use [auto-pr](https://github.com/Belorq/flux-lab/blob/main/.github/workflows/auto-pr.yaml) o automatically create pull requests from branches generated by Flux. \
The [lint](https://github.com/Belorq/flux-lab/blob/main/.github/workflows/lint.yaml) workflow is used to validate YAML files and Kubernetes manifests.
